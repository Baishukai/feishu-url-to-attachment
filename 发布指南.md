# 飞书字段捷径插件发布指南

## 📦 发布前准备

确保你已经完成以下步骤：

1. ✅ 代码开发完成并本地调试通过
2. ✅ 执行 `npm run pack` 生成 `output/output.zip`
3. ✅ 准备好插件的名称、图标和描述

---

## 🚀 企业内部发布步骤

### 第一步：访问飞书开放平台

1. 打开 [飞书开放平台](https://open.feishu.cn/)
2. 使用你的飞书账号登录

### 第二步：创建应用

1. 点击右上角「创建应用」
2. 选择「企业自建应用」
3. 填写应用信息：
   - **应用名称**：链接转附件
   - **应用描述**：将文本字段中的URL链接转换为附件
   - **应用图标**：上传一个图标（建议 512x512 像素）

### 第三步：添加字段捷径能力

1. 进入应用详情页
2. 点击左侧菜单「添加应用能力」
3. 在能力列表中搜索「多维表格」
4. 找到「字段捷径」能力，点击「添加」

### 第四步：配置字段捷径

1. 在能力配置页面，填写：
   - **捷径名称**：链接转附件
   - **捷径描述**：将包含URL的文本字段转换为可预览的附件
   - **捷径图标**：选择或上传图标

2. **上传代码包**：
   - 点击「上传代码包」
   - 选择 `output/output.zip` 文件
   - 等待上传完成

3. **设置执行模式**（可选）：
   - 同步执行：适合快速响应的插件（超时58秒）
   - 异步执行：适合耗时较长的插件（超时15分钟）

### 第五步：版本发布

1. 点击「创建版本」
2. 填写版本号（如 1.0.0）和更新说明
3. 点击「保存」

### 第六步：发布应用

1. 进入「版本管理与发布」
2. 选择刚才创建的版本
3. 点击「申请发布」
4. 选择发布范围：
   - **指定部门**：只有这些部门的成员可以使用
   - **全公司**：所有员工都可以使用
5. 提交发布申请

### 第七步：管理员审批

- 如果你是管理员，可以直接在管理后台审批
- 如果不是管理员，需要等待公司管理员审批

---

## ✅ 发布成功后

发布成功后，用户可以在多维表格中：

1. 点击添加字段
2. 选择「字段捷径」类型
3. 在插件列表中找到「链接转附件」
4. 配置并使用

---

## ⚠️ 常见问题

### Q: 上传代码包失败？
- 确保 `output.zip` 文件完整
- 重新执行 `npm run pack` 生成

### Q: 插件运行报错？
- 检查域名白名单是否正确配置
- 查看字段捷径调试助手中的日志

### Q: 如何更新插件？
1. 修改代码
2. 重新打包 `npm run pack`
3. 创建新版本并上传新的代码包
4. 发布新版本

---

## 📁 相关文件

- 代码包位置：`output/output.zip`
- 源代码：`src/index.ts`
